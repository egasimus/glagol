(lambda wrap-js (bundle app cb)
  (if (! app.boot) (return "document.write('no client boot script')"))
  (var boot app.boot.compiled)
  (function replace (key val) (= boot (boot.replace key (./just val))))
  (replace "%REQUIRE%" bundle)
  (replace "%DEPS%" (JSON.stringify app.deps.deps))
  (replace "%ICE%" (JSON.stringify app.ice))
  (replace "%FORMATS%" (./formats app.formats))
  (return boot))
