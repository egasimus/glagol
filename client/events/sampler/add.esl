(lambda ()
  ((. (../../api/call "invoke" "sampler/add") then)
    (lambda (data)
      ((. (../../lib/q/all (array
        (data.get "id")
        (data.get "localPort")
        (data.get "remotePort"))
      ) spread) (lambda (id local-port remote-port)
        (console.log id local-port remote-port)
        (var samplers (../../state/samplers))
        (= (get samplers id) (object))
        (../state/samplers/set samplers))))
    (../../lib/error "error adding sampler")))
