(fn repl-eval [source]
  (let [compiled
          (./runtime/compile-source source "<repl>")
        vm
          (require :vm)
        context
          (vm.create-context
            ../api)]
    (try
      (vm.run-in-context
        compiled.output.code
        context
        { :filename "<repl>" })
      (catch error (log.as :stack error.stack) error.message))))
