((lambda ()

  (var emitter (new (. (require "eventemitter2") EventEmitter2)
    (object "maxListeners" 64 "wildcard" true)))

  (emitter.on-any dispatch)

  (return emitter)

  (function dispatch ()
    (if (=== (typeof this.event) "string")
      (var event (this.event.split "."))
      (var event this.event))
    (= event (event.reduce resolve-event ./events))
    (event.apply null arguments))

  (function resolve-event (dir name)
    (var event (get dir name))
    (return event))

))
