(fn repl-eval [source]
  (let [compiled
          (./runtime/compile-source source "<repl>")
        vm
          (require :vm)
        context
          (vm.create-context
            ../api)
        value
          (vm.run-in-context
            compiled.output.code
            context
            { :filename "<repl>" })]
    (if context.error (log context.error))
    value))
