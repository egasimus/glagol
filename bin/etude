#!/usr/bin/env node

var chokidar = require('chokidar')
  , fs       = require('fs')
  , path     = require('path')
  , engine   = require('..');

var arg1 = process.argv[2];

if (!arg1) {
  var usage =
    [ "usage:"
    , "  etude <dir>"
    , "  etude <file>"
    , "  etude <dir> <file>" ];

  console.log(usage.join("\n"));
} else {

  arg1 = path.resolve(arg1);

  if (!fs.existsSync(arg1)) {
    console.log("\"" + entryPath + "\"", "doesn't seem to exist.");
    process.exit();
  }

  process.argv = process.argv.slice(3);

  var root = engine.tree.makeNotionDirectory(path.dirname(arg1));
  engine.tree.descend(root, path.basename(arg1)).value;
}
