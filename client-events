(let [emitter
        (new (.-EventEmitter2 (require "eventemitter2"))
          { :maxListeners 64 :wildcard true } )]

  (emitter.on "sequencer.click" (fn [t n]
    (let [curr-track
            (aget @client-state t)
          curr-val
            (aget curr-track n)
          next-val
            (- 1 curr-val)
          next-track
            (.concat (.concat (curr-track.slice 0 n) next-val)
              (curr-track.slice (+ 1 n)))]
      (console.log (assoc @client-state t next-track))
      (client-state.value.set (assoc @client-state t next-track)))))

  emitter)
