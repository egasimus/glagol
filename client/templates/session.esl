(lambda (s)

  (var options  (object))
  (var elements (array))

  (.map (Object.keys s.session) (lambda (device-type)
    (var devices (get s.session device-type))
    (.map (Object.keys devices) (lambda (id)
      (elements.push ((get /templates device-type) (get devices id) s))))))

  (return (./h ".session" options elements)))
