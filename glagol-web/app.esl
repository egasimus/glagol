(lambda (glagol-opts app)
  (= app (to-glagol app))
  (.for-each (Array.prototype.slice.call arguments 2) overlay)
  (function to-glagol (x)
    (return (?: (=== "string" (typeof x)) (/util/glagol x glagol-opts) x)))
  (function overlay (x)
    (app.overlay (to-glagol x)))
  (function handler (req res)
    (/util/bundle app req res))
  (= handler.tracked app)
  (return handler))
